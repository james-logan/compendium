'use strict';

angular.module('compendiumPrime').controller('logOutController', function (Auth, $scope, $location) {
  Auth.logout(function () {
    $location.path('/');
    $scope.$apply();
  });
}).controller('launchController', function ($location, $http, $scope, $rootScope, Auth, STORAGE_URL) {
  var vm = this;
  vm.data = {};

  vm.login = function () {
    Auth.login(vm.data, function () {
      $location.path('/profilepage');
      $scope.$apply();
    });
  };

  var pointStarter = function pointStarter() {
    $http.put(STORAGE_URL + 'points/' + $rootScope.auth.uid + '.json', 0);
  };

  vm.register = function () {
    Auth.register(vm.data, function (data) {
      Auth.login(vm.data);
      pointStarter();
      $location.path('/profileform');
      $scope.$apply();
    });
  };
}).controller('leaderBoardController', function ($location, $http, STORAGE_URL) {
  var vm = this;
  vm.summary = {};
  $http.get(STORAGE_URL + 'points.json').success(function (data) {
    Object.keys(data).forEach(function (uid) {
      vm.summary[uid] = {
        points: data[uid]
      };
      $http.get(STORAGE_URL + 'profiles/' + uid + '.json').success(function (data) {
        vm.summary[uid].username = data.username;
        vm.summary[uid].img = data.img;
      });
    });
  });
}).controller('profileFormController', function ($http, $rootScope, STORAGE_URL, $location) {
  var vm = this;

  vm.data = {};
  vm.modal = false;

  $http.get(STORAGE_URL + 'profiles/' + $rootScope.auth.uid + '.json').success(function (data) {
    vm.data = data;
  });

  vm.save = function () {
    $http.put(STORAGE_URL + 'profiles/' + $rootScope.auth.uid + '.json', vm.data).success(function (data) {
      vm.modal = true;
    });
  };

  vm.backToProfile = function () {
    $location.path('/profilepage');
  };

  vm.closeModal = function () {
    vm.modal = false;
  };
}).controller('bookPageController', function ($http, $routeParams, STORAGE_URL) {
  var vm = this;
  vm.id = $routeParams.id;
  vm.bookData = {};
  $http.get('https://www.googleapis.com/books/v1/volumes?q=' + vm.id + '&langRestrict=english&maxResults=1&orderBy=relevance&printType=books&projection=lite&key= AIzaSyChXEjLh0EhY7pzGcddLTnlcku596jLl0Y').success(function (data) {
    vm.bookData.title = data.items[0].volumeInfo.title;
    vm.bookData.author = data.items[0].volumeInfo.authors[0];
    vm.bookData.img = data.items[0].volumeInfo.imageLinks.thumbnail;
  });

  $http.get(STORAGE_URL + 'books/' + vm.id.toLowerCase() + '.json').success(function (data) {
    vm.tagSorter(data);
  });
  vm.finalObj = {
    space: {},
    subgen: {},
    social: {},
    scientific: {},
    other: {}
  };
  vm.tagSorter = function (obj) {
    var refArr = ['space', 'subgen', 'social', 'scientific', 'other'];
    Object.keys(obj).forEach(function (uid) {
      refArr.forEach(function (cat) {
        var tag = obj[uid][cat];
        if (vm.finalObj[cat][tag]) {
          vm.finalObj[cat][tag] += 1;
        } else {
          vm.finalObj[cat][tag] = 1;
        }
      });
    });
  };
});
//# sourceMappingURL=data:application/json;base64,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QUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0FBQ3JCLFlBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRTtBQUN6QixZQUFFLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFHLENBQUMsQ0FBQztTQUMzQixNQUFNO0FBQ0wsWUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDM0I7T0FDSixDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7R0FDSCxDQUFBO0NBRUYsQ0FBQyxDQUFBIiwiZmlsZSI6InNyYy9qcy9jb250cm9sbGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcbiAgLm1vZHVsZSgnY29tcGVuZGl1bVByaW1lJylcbiAgLmNvbnRyb2xsZXIoJ2xvZ091dENvbnRyb2xsZXInLCBmdW5jdGlvbiAoQXV0aCwgJHNjb3BlLCAkbG9jYXRpb24pIHtcbiAgICBBdXRoLmxvZ291dChmdW5jdGlvbiAoKSB7XG4gICAgICAkbG9jYXRpb24ucGF0aCgnLycpXG4gICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgfSlcbiAgfSlcbiAgLmNvbnRyb2xsZXIoJ2xhdW5jaENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJGxvY2F0aW9uLCAkaHR0cCwgJHNjb3BlLCAkcm9vdFNjb3BlLCBBdXRoLCBTVE9SQUdFX1VSTCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uZGF0YSA9IHt9O1xuXG4gICAgdm0ubG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBBdXRoLmxvZ2luKHZtLmRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9wcm9maWxlcGFnZScpXG4gICAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgdmFyIHBvaW50U3RhcnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRodHRwXG4gICAgICAgIC5wdXQoU1RPUkFHRV9VUkwgKyAncG9pbnRzLycgKyAkcm9vdFNjb3BlLmF1dGgudWlkICsgJy5qc29uJywgMClcbiAgICB9XG5cbiAgICB2bS5yZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIEF1dGgucmVnaXN0ZXIodm0uZGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgQXV0aC5sb2dpbih2bS5kYXRhKTtcbiAgICAgICAgcG9pbnRTdGFydGVyKCk7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvcHJvZmlsZWZvcm0nKVxuICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgLmNvbnRyb2xsZXIoJ2xlYWRlckJvYXJkQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkbG9jYXRpb24sICRodHRwLCBTVE9SQUdFX1VSTCkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uc3VtbWFyeSA9IHt9XG4gICAgJGh0dHBcbiAgICAgIC5nZXQoU1RPUkFHRV9VUkwgKyAncG9pbnRzLmpzb24nKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgICAgdm0uc3VtbWFyeVt1aWRdID0ge1xuICAgICAgICAgICAgcG9pbnRzOiBkYXRhW3VpZF1cbiAgICAgICAgICB9XG4gICAgICAgICAgJGh0dHBcbiAgICAgICAgICAgIC5nZXQoU1RPUkFHRV9VUkwgKyAncHJvZmlsZXMvJyArIHVpZCArICcuanNvbicpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICB2bS5zdW1tYXJ5W3VpZF0udXNlcm5hbWUgPSBkYXRhLnVzZXJuYW1lO1xuICAgICAgICAgICAgICB2bS5zdW1tYXJ5W3VpZF0uaW1nID0gZGF0YS5pbWc7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgICB9KVxuICB9KVxuXG4gIC5jb250cm9sbGVyKCdwcm9maWxlRm9ybUNvbnRyb2xsZXInLCBmdW5jdGlvbiAoJGh0dHAsICRyb290U2NvcGUsIFNUT1JBR0VfVVJMLCAkbG9jYXRpb24pIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgdm0uZGF0YSA9IHt9O1xuICAgIHZtLm1vZGFsID0gZmFsc2U7XG5cbiAgICAkaHR0cFxuICAgICAgLmdldChTVE9SQUdFX1VSTCArICdwcm9maWxlcy8nICsgJHJvb3RTY29wZS5hdXRoLnVpZCArICcuanNvbicpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2bS5kYXRhID0gZGF0YTtcbiAgICAgIH0pXG5cbiAgICB2bS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgJGh0dHBcbiAgICAgICAgLnB1dChTVE9SQUdFX1VSTCArICdwcm9maWxlcy8nICsgJHJvb3RTY29wZS5hdXRoLnVpZCArICcuanNvbicsIHZtLmRhdGEpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdm0ubW9kYWw9dHJ1ZTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB2bS5iYWNrVG9Qcm9maWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoJy9wcm9maWxlcGFnZScpXG4gICAgfVxuXG4gICAgdm0uY2xvc2VNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZtLm1vZGFsID0gZmFsc2U7XG4gICAgfVxuICB9KVxuXG4gIC5jb250cm9sbGVyKCAnYm9va1BhZ2VDb250cm9sbGVyJywgZnVuY3Rpb24gKCRodHRwLCAkcm91dGVQYXJhbXMsIFNUT1JBR0VfVVJMKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5pZCA9ICRyb3V0ZVBhcmFtcy5pZFxuICAgIHZtLmJvb2tEYXRhID0ge31cbiAgICAkaHR0cFxuICAgICAgICAuZ2V0KCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9ib29rcy92MS92b2x1bWVzP3E9JyArIHZtLmlkICsgJyZsYW5nUmVzdHJpY3Q9ZW5nbGlzaCZtYXhSZXN1bHRzPTEmb3JkZXJCeT1yZWxldmFuY2UmcHJpbnRUeXBlPWJvb2tzJnByb2plY3Rpb249bGl0ZSZrZXk9IEFJemFTeUNoWEVqTGgwRWhZN3B6R2NkZExUbmxja3U1OTZqTGwwWScpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdm0uYm9va0RhdGEudGl0bGUgPSBkYXRhLml0ZW1zWzBdLnZvbHVtZUluZm8udGl0bGU7XG4gICAgICAgICAgdm0uYm9va0RhdGEuYXV0aG9yID0gZGF0YS5pdGVtc1swXS52b2x1bWVJbmZvLmF1dGhvcnNbMF1cbiAgICAgICAgICB2bS5ib29rRGF0YS5pbWcgPSBkYXRhLml0ZW1zWzBdLnZvbHVtZUluZm8uaW1hZ2VMaW5rcy50aHVtYm5haWxcbiAgICAgICAgfSlcblxuICAgICRodHRwXG4gICAgICAuZ2V0KFNUT1JBR0VfVVJMICsgJ2Jvb2tzLycgKyB2bS5pZC50b0xvd2VyQ2FzZSgpICsgJy5qc29uJylcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZtLnRhZ1NvcnRlcihkYXRhKTtcbiAgICAgIH0pXG4gICAgdm0uZmluYWxPYmogPSB7XG4gICAgICAgIHNwYWNlOiB7fSxcbiAgICAgICAgc3ViZ2VuOiB7fSxcbiAgICAgICAgc29jaWFsOiB7fSxcbiAgICAgICAgc2NpZW50aWZpYzoge30sXG4gICAgICAgIG90aGVyOiB7fVxuICAgICAgfVxuICAgIHZtLnRhZ1NvcnRlciA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHZhciByZWZBcnIgPSBbXCJzcGFjZVwiLCBcInN1YmdlblwiLCBcInNvY2lhbFwiLCBcInNjaWVudGlmaWNcIiwgXCJvdGhlclwiXVxuICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmVmQXJyLmZvckVhY2goZnVuY3Rpb24gKGNhdCkge1xuICAgICAgICAgIHZhciB0YWcgPSBvYmpbdWlkXVtjYXRdXG4gICAgICAgICAgICBpZiAodm0uZmluYWxPYmpbY2F0XVt0YWddKSB7XG4gICAgICAgICAgICAgIHZtLmZpbmFsT2JqW2NhdF1bdGFnXSArPTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2bS5maW5hbE9ialtjYXRdW3RhZ10gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgfSlcbiJdfQ==
